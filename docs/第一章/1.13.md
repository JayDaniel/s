
## 标签菜单
标签菜单指的是 `Tabs`。Tabs 一般用于展现多个页面的内容的容器，例如微信的下面标签栏。

常用的组件有：TabBar、TabBarView、TabController（有状态）、DefaultTabController（无状态）、BottomNavigationBar（底端栏）。


在 Tabs 里，使用到了动画效果，因此需要 with 一个类。

```js
// 之前
class HomePageState extends State<HomePage> {
    // ...
}
// 使用 Tabs 之后
class HomePageState extends State<HomePage> with SingleTickerProviderStateMixin {
    // ...
}
```

接着，在 HomePageState 里初始化 Tabs Controller，这里重写了两个生命周期函数。

```js
class HomePageState extends State<HomePage> with SingleTickerProviderStateMixin {
    var tabController;      // 先声明变量

    @override
    void initState() {
        super.initState();
        this.tabController = new TabController(
            vsync: this,   // 动画效果的异步处理
            length: 3      // tab 个数
        );
    }
    // 当整个页面 dispose 时，记得把控制器也 dispose 掉，释放内存
    @override
    void dispose() {
        this.tabController .dispose();
        super.dispose();
    }
}
```

接着，添加 TabBar 和 TabBarView。

```js

Widget build(BuildContext context) {
    return new Scaffold(
        appBar: new AppBar(
            title: new Text('首页'),
        ),
        body: new TabBarView(
            controller: this.tabController, //配置控制器
            children: <Tab>[ // Tab 内容
                new Text('aaa'),
                new Text('bbb'),
                new Text('ccc'),
            ],
        ),
        // 底端栏是一个 TabBar
        bottomNavigationBar: new Material(
            color: Colors.blue,
            child: new TabBar(
                controller: this.tabController,
                tabs: <Tab>[
                    new Tab(
                        text: '主页',
                        icon: new Icon(Icons.home),
                    ),
                    new Tab(
                        text: '历史',
                        icon: new Icon(Icons.history),
                    ),
                    new Tab(
                        text: '书籍',
                        icon: new Icon(Icons.book),
                    ),
                ],
                indicatorColor: Colors.white,
            ),
        )
    );
}
```

可以看到，在 TabBar 里是设置控制栏的内容，在 TabBarView 里是设置每个 Tab 的内容。而 TabController 是一个用于控制的组件。
TabBar 与 TabBarView 的数组位置一一对应。

![](/../../image/20180628171010.png)


### TabBar
在 TabBar 里有以下属性：
- **controller → TabController** - 控制组件。
- **tabs → List<Widget>** - tabs 列表。
- **indicatorColor → Color** - 指示线颜色，就是下面的线条。使用 Colors.transparent 可以让它消失。
- **unselectedLabelColor → Color** - 未选定标签标签的颜色。
- **unselectedLabelStyle → TextStyle** - 未选定标签标签的文字样式。
- **labelStyle → TextStyle** - 字体样式。
- **labelColor → Color** - 字体颜色，默认白色。
- **isScrollable → bool** - 该标签栏是否可以水平滚动，默认 false。在多个 tab 时有用。
- **indicatorWeight → double** - 指示线的大小，必须大于 0。
- **indicatorSize → TabBarIndicatorSize** - 所选标签指标的大小，当为 Tab 时会尽可能大，当为 Label 时会尽可能小。
- **indicatorPadding → EdgeInsetsGeometry** - 显示在选定选项卡下方的线的水平填充。


![](/../../image/20180628174456.png)


**TabBar 没有可以用于设置选中项样式的属性。**那么想设置选中的样式怎么弄？可以利用未选中来排除。

```js
 bottomNavigationBar: new Material(
    color: Colors.white,
    child: new TabBar(
        controller: this.tabController,
        tabs: <Tab>[],
        unselectedLabelColor: Colors.black38, // <-- 一定要在 labelColor 前面。
        labelColor: Colors.blue,
        indicatorColor: Colors.blue,
    ),
);
```


